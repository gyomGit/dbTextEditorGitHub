#Requested Step Name Management
record (calc, "$(PREFIX)TSOSRQ:State-calc")
{
	field(DESC, "Requested State calc for MBBI")
	field(INPA, "$(PREFIX)TSOSRQ:80kPltsStp CP")
	field(INPB, "$(PREFIX)TSOSRQ:Cp80kLpRdyOper CP")
	field(INPC, "$(PREFIX)TSOSRQ:MagCp80kLpRdyOper CP")
	field(INPD, "$(PREFIX)TSOSRQ:80kLpNomMod CP")
	field(INPE, "$(PREFIX)TSOSRQ:80KLpStdByMod CP")
	field(CALC, "A|(B<<1)|(C<<2)|(D<<3)|(E<<4)")
	field(FLNK, "$(PREFIX)TSOSRQ:StepId")
}
# "A||(B<<1)||(C<<2)||(D<<3)||(E<<1)"
# Active Step ID management
record (mbbi, "$(PREFIX)TSOSRQ:StepId")
{
	field(INP, "$(PREFIX)TSOSRQ:State-calc")
	field(DTYP, "Raw Soft Channel")
	field(DESC, "Active Requested State Step Id ")
	field(ZRST, "L0")
	field(ONST, "L4")
	field(TWST, "L13")
	field(THST, "L102")
	field(FRST, "L22")
	field(ZRVL, "0x01")
	field(ONVL, "0x02")
	field(TWVL, "0x04")
	field(THVL, "0x08")
	field(FRVL, "0x10")
}
record (calc, "$(PREFIX)TSOS:StepIdx1")
{
	field(INPA, "$(PREFIX)TSOS:L0-X CP")
	field(INPB, "$(PREFIX)TSOS:L1-X CP")
	field(INPC, "$(PREFIX)TSOS:L2-X CP")
	field(INPD, "$(PREFIX)TSOS:L3-X CP")
	field(INPE, "$(PREFIX)TSOS:L4-X CP")
	field(INPF, "$(PREFIX)TSOS:L10-X CP")
	field(INPG, "$(PREFIX)TSOS:L11-X CP")
	field(INPH, "$(PREFIX)TSOS:L12-X CP")
	field(INPI, "$(PREFIX)TSOS:L13-X CP")
	field(INPJ, "$(PREFIX)TSOS:L100a-X CP")
	field(INPK, "$(PREFIX)TSOS:L100b-X CP")
	field(CALC, "A|(B<<1)|(C<<2)|(D<<3)|(E<<4)|(F<<5)|(G<<6)|(H<<7)|(I<<8)|(J<<9)|(K<<10)")
}
# !!!Reminder:  CALC field is maximum 80 character string
record (calc, "$(PREFIX)TSOS:StepIdx2")
{
	field(INPA, "$(PREFIX)TSOS:L100c-X CP")
	field(INPB, "$(PREFIX)TSOS:L102-X CP")
	field(INPB, "$(PREFIX)TSOS:L102-X CP")
	field(INPC, "$(PREFIX)TSOS:L19-X CP")
	field(INPD, "$(PREFIX)TSOS:L19b-X CP")
	field(INPE, "$(PREFIX)TSOS:L19c-X CP")
	field(INPF, "$(PREFIX)TSOS:L20-X CP")
	field(INPG, "$(PREFIX)TSOS:L21-X CP")
	field(INPH, "$(PREFIX)TSOS:L22-X CP")
	field(INPI, "$(PREFIX)TSOS:L16-X CP")
	field(INPJ, "$(PREFIX)TSOS:L17-X CP")
	field(INPK, "$(PREFIX)TSOS:L18a-X CP")
	field(CALC, "A|(B<<1)|(C<<2)|(D<<3)|(E<<4)|(F<<5)|(G<<6)|(H<<7)|(I<<8)|(J<<9)|(K<<10)")
}
# !!!Reminder:  CALC field is maximum 80 character string
# !!!Reminder:  caget -S CRYO-MC-TSOS:StepIdx3.CALC$ to get the full string
record (calc, "$(PREFIX)TSOS:StepIdx3")
{
	field(INPA, "$(PREFIX)TSOS:L18b-X CP")
	field(INPB, "$(PREFIX)TSOS:L18c-X CP")
	field(INPC, "$(PREFIX)TSOS:L101a-X CP")
	field(INPD, "$(PREFIX)TSOS:L101b-X CP")
	field(INPE, "$(PREFIX)TSOS:L101c-X CP")
	field(INPF, "$(PREFIX)TSOS:L14-X CP")
	field(INPG, "$(PREFIX)TSOS:L15-X CP")
	field(INPH, "$(PREFIX)TSOS:L5-X CP")
	field(INPI, "$(PREFIX)TSOS:L6-X CP")
	field(CALC, "A|(B<<1)|(C<<2)|(D<<3)|(E<<4)|(F<<5)|(G<<6)|(H<<7)|(I<<8)")
}
# !!!Reminder:  CALC field is maximum 80 character string
record (mbbi, "$(PREFIX)TSOS:StepIdSel1")
{
	field(INP, "$(PREFIX)TSOS:StepIdx1 CP")
	field(DTYP, "Raw Soft Channel")
	field(ZRVL, 1)
	field(ZRST, "L0")
	field(ONVL, 2)
	field(ONST, "L1")
	field(TWVL, 4)
	field(TWST, "L2")
	field(THVL, 8)
	field(THST, "L3")
	field(FRVL, 16)
	field(FRST, "L4")
	field(FVVL, 32) # example comment
	field(FVST, " L10")
	field(SXVL, 64)
	field(SXST, "L11")
	field(SVVL, 128)
	field(SVST, "L12")
	field(EIVL, 256)
	field(EIST, "L13")
	field(NIVL, 512)
	field(NIST, "b")
	field(TEVL, 1024)
	field(TEST, "L100b")
}
record (mbbi, "$(PREFIX)TSOS:StepIdSel2")
{
	field(INP, "$(PREFIX)TSOS:StepIdx2 CP")
	field(DTYP, "Raw Soft Chanel")
	field(ZRVL, 1)
	field(ZRST, "L100c")
	field(ONVL, 2)
	field(ONST, "L102")
	field(TWVL, 4)
	field(TWST, "L19")
	field(THVL, 8)
	field(THST, "L19b")
	field(FRVL, 16)
	field(FRST, "L19c")
	field(FVVL, 32)
	field(FVST, "L20")
	field(SXVL, 64)
	field(SXST, "L21")
	field(SVVL, 128)
	field(SVST, "L22")
	field(EIVL, 256)
	field(EIST, "L16")
	field(NIVL, 512)
	field(NIST, "L17")
	field(TEVL, 1024)
	field(TEST, "L18a")
}
record (mbbi, "$(PREFIX)TSOS:StepIdSel3")
{
	field(INP, "$(PREFIX)TSOS:StepIdx3 CP")
	field(DTYP, "Raw Soft Channel")
	field(ZRVL, 1)
	field(ZRST, "L18b")
	field(ONVL, 2)
	field(ONST, "L18c")
	field(TWVL, 4)
	field(TWST, "L101a")
	field(THVL, 8)
	field(THST, "L101b")
	field(FRVL, 16)
	field(FRST, "L101c")
	field(FVVL, 32)
	field(FVST, "L14")
	field(SXVL, 64)
	field(SXST, "L15")
	field(SVVL, 128)
	field(SVST, "L5")
	field(EIVL, 256)
	field(EIST, "L6")
}
# Selection record:
# IF A>0:
#   Return C
# IF B>0
# 	Return D
record (scalcout, "$(PREFIX)TSOS:ActiveStepId")
{
	field(INPA, "$(PREFIX)TSOS:StepIdx1 CP")
	field(INPB, "$(PREFIX)TSOS:StepIdx2 CP")
	field(INPC, "$(PREFIX)TSOS:StepIdx3 CP")
	field(INAA, "$(PREFIX)TSOS:StepIdSel1 CP")
	field(INBB, "$(PREFIX)TSOS:StepIdSel2 CP")
	field(INCC, "$(PREFIX)TSOS:StepIdSel3 CP")
	field(CALC, "A>B?AA:(B>C?BB:CC)")
}
# !!!Reminder:  CALC field is maximum 80 character string
record (calc, "$(PREFIX)TSCP:StepIdx")
{
	field(INPA, "$(PREFIX)TSCP:P100-X CP")
	field(INPB, "$(PREFIX)TSCP:P101-X CP")
	field(INPC, "$(PREFIX)TSCP:P102-X CP")
	field(INPD, "$(PREFIX)TSCP:P103-X CP")
	field(INPE, "$(PREFIX)TSCP:P104-X CP")
	field(INPF, "$(PREFIX)TSCP:P105-X CP")
	field(INPG, "$(PREFIX)TSCP:P106-X CP")
	field(INPH, "$(PREFIX)TSCP:P107-X CP")
	field(INPI, "$(PREFIX)TSCP:P108-X CP")
	field(INPJ, "$(PREFIX)TSCP:P109-X CP")
	field(INPK, "$(PREFIX)TSCP:P110-X CP")
	field(CALC, "A|(B<<1)|(C<<2)|(D<<3)|(E<<4)|(F<<5)|(G<<6)|(H<<7)|(I<<8)|(J<<9)|(K<<10)")
}
# !!!Reminder:  CALC field is maximum 80 character string
record (mbbi, "$(PREFIX)TSCP:StepIdSel")
{
	field(INP, "$(PREFIX)TSCP:StepIdx CP")
	field(DTYP, "Raw Soft Channel")
	field(ZRVL, 1)
	field(ZRST, "P100")
	field(ONVL, 2)
	field(ONST, "P101")
	field(TWVL, 4)
	field(TWST, "P102")
	field(THVL, 8)
	field(THST, "P103")
	field(FRVL, 16)
	field(FRST, "P104")
	field(FVVL, 32)
	field(FVST, "P105")
	field(SXVL, 64)
	field(SXST, "P106")
	field(SVVL, 128)
	field(SVST, "P107")
	field(EIVL, 256)
	field(EIST, "P108")
	field(NIVL, 512)
	field(NIST, "P109")
	field(TEVL, 1024)
	field(TEST, "P110")
}
# !!!Reminder:  CALC field is maximum 80 character string
record (scalcout, "$(PREFIX)TSCP:ActiveStepId")
{
	field(INPA, "$(PREFIX)TSCP:StepIdx CP")
	field(INAA, "$(PREFIX)TSCP:StepIdSel CP")
	field(CALC, "AA")
}
# !!!Reminder:  CALC field is maximum 80 character string
record (calc, "$(PREFIX)TSMG:StepIdx")
{
	field(INPA, "$(PREFIX)TSMG:P200-X CP")
	field(INPB, "$(PREFIX)TSMG:P201-X CP")
	field(INPC, "$(PREFIX)TSMG:P202-X CP")
	field(INPD, "$(PREFIX)TSMG:P203-X CP")
	field(INPE, "$(PREFIX)TSMG:P204-X CP")
	field(INPF, "$(PREFIX)TSMG:P205-X CP")
	field(INPG, "$(PREFIX)TSMG:P206-X CP")
	field(INPH, "$(PREFIX)TSMG:P207-X CP")
	field(INPI, "$(PREFIX)TSMG:P208-X CP")
	field(INPJ, "$(PREFIX)TSMG:P209-X CP")
	field(INPK, "$(PREFIX)TSMG:P210-X CP")
	field(CALC, "A|(B<<1)|(C<<2)|(D<<3)|(E<<4)|(F<<5)|(G<<6)|(H<<7)|(I<<8)|(J<<9)|(K<<10)")
}
# !!!Reminder:  CALC field is maximum 80 character string
record (mbbi, "$(PREFIX)TSMG:StepIdSel")
{
	field(DTYP, "Raw Soft Channel")
	field(INP, "$(PREFIX)TSMG:StepIdx CP")
	field(ZRVL, 1)
	field(ZRST, "P200")
	field(ONVL, 2)
	field(ONST, "P201")
	field(TWVL, 4)
	field(TWST, "P202")
	field(THVL, 8)
	field(THST, "P203")
	field(FRVL, 16)
	field(FRST, "P204")
	field(FVVL, 32)
	field(FVST, "P205")
	field(SXVL, 64)
	field(SXST, "P206")
	field(SVVL, 128)
	field(SVST, "P207")
	field(EIVL, 256)
	field(EIST, "P208")
	field(NIVL, 512)
	field(NIST, "P209")
	field(TEVL, 1024)
	field(TEST, "P210")
}
record (scalcout, "$(PREFIX)TSMG:ActiveStepId")
{
	field(INPA, "$(PREFIX)TSMG:StepIdx CP")
	field(INAA, "$(PREFIX)TSMG:StepIdSel CP")
	field(CALC, "AA")
}
# MAster Operating State Graph Management
record (calc, "$(PREFIX)MOS:BfCdwnSeq")
{
	field(DESC, "CP Baffles Cool Down Seq ")
	field(INPA, "$(PREFIX)TSOS:L1-X CP")
	field(INPB, "$(PREFIX)TSOS:L2-X CP")
	field(INPC, "$(PREFIX)TSOS:L3-X CP")
	field(CALC, "A||B||C")
}
record (calc, "$(PREFIX)MOS:BfWupSeq")
{
	field(DESC, "CP Baffles Warm Up Seq ")
	field(INPA, "$(PREFIX)TSOS:L5-X CP")
	field(INPB, "$(PREFIX)TSOS:L6-X CP")
	field(CALC, "A||B")
}
record (calc, "$(PREFIX)MOS:TsCdwnSeq")
{
	field(DESC, "CP Baffles Warm Up Seq ")
	field(INPA, "$(PREFIX)TSOS:L10-X CP")
	field(INPB, "$(PREFIX)TSOS:L11-X CP")
	field(INPC, "$(PREFIX)TSOS:L12-X CP")
	field(CALC, "A||B||C")
}
record (calc, "$(PREFIX)MOS:TsWupSeq")
{
	field(DESC, "CP Baffles Warm Up Seq ")
	field(INPA, "$(PREFIX)TSOS:L14-X CP")
	field(INPB, "$(PREFIX)TSOS:L15-X CP")
	field(CALC, "A||B")
}
record (calc, "$(PREFIX)MOS:80kLpsCplgSeq")
{
	field(INPA, "$(PREFIX)TSOS:L100a-X CP")
	field(INPB, "$(PREFIX)TSOS:L100b-X CP")
	field(INPC, "$(PREFIX)TSOS:L100c-X CP")
	field(CALC, "A||B||C")
}
record (calc, "$(PREFIX)MOS:80kLpsDecgSeq")
{
	field(INPA, "$(PREFIX)TSOS:L101a-X CP")
	field(INPB, "$(PREFIX)TSOS:L101b-X CP")
	field(INPC, "$(PREFIX)TSOS:L101c-X CP")
	field(CALC, "A||B||C")
}
record (calc, "$(PREFIX)MOS:80kPltDiscSeq")
{
	field(INPA, "$(PREFIX)TSOS:L19-X CP")
	field(INPB, "$(PREFIX)TSOS:L19b-X CP")
	field(INPC, "$(PREFIX)TSOS:L19c-X CP")
	field(INPC , "$(PREFIX)TSOS:L20-X CP")
	field(INPC, "$(PREFIX)TSOS:L21-X CP")
	field(CALC, "A||B||C||D||E")
}
record (calc, "$(PREFIX)MOS:80kPltConnSeq")
{
	field(INPA, "$(PREFIX)TSOS:L16-X CP")
	field(INPB, "$(PREFIX)TSOS:L17-X CP")
	field(INPC, "$(PREFIX)TSOS:L18a-X CP")
	field(INPC, "$(PREFIX)TSOS:L18b-X CP")
	field(INPC, "$(PREFIX)TSOS:L18-X CP")
	field(CALC, "A||B||C||D")
}
